<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney Data Platform Playbook" href="/Data-Platform-Playbook/opensearch.xml"><title data-react-helmet="true">Prototyping glue jobs in a notebook | Hackney Data Platform Playbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://playbook.hackney.gov.uk//Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/using-sagemaker"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Prototyping glue jobs in a notebook | Hackney Data Platform Playbook"><meta data-react-helmet="true" name="description" content="Prototyping transformation scripts using a Jupyter Notebook"><meta data-react-helmet="true" property="og:description" content="Prototyping transformation scripts using a Jupyter Notebook"><link data-react-helmet="true" rel="shortcut icon" href="/Data-Platform-Playbook/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://playbook.hackney.gov.uk//Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/using-sagemaker"><link data-react-helmet="true" rel="alternate" href="https://playbook.hackney.gov.uk//Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/using-sagemaker" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://playbook.hackney.gov.uk//Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/using-sagemaker" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Data-Platform-Playbook/assets/css/styles.1180568a.css">
<link rel="preload" href="/Data-Platform-Playbook/assets/js/runtime~main.70ca00a1.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/assets/js/main.ef2f8cd2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Data-Platform-Playbook/"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Data Platform Playbook</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/data-platform-playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Playbook</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Training Modules</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Getting set up on the platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Finding data on the platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Getting access to data</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Ingesting data</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Transforming data</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Guides to testing in the platform</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Using AWS Glue</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/using-glue-studio">Using Glue Studio</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/deploy-glue-jobs">Deploying Glue jobs to the Data Platform</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/using-sagemaker">Prototyping glue jobs in a notebook</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Practical examples</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Querying and analysing data</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Technical Documentation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture Decision</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Spikes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/roles">Roles</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Prototyping glue jobs in a notebook</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prototyping-glue-jobs-in-a-jupyter-notebook"></a>Prototyping glue jobs in a Jupyter notebook<a class="hash-link" href="#prototyping-glue-jobs-in-a-jupyter-notebook" title="Direct link to heading">#</a></h2><p>This guide explains how to connect to a notebook instance using AWS Sagemaker and also some tips for using the notebook.
We use notebooks to prototype transformation scripts before they are run and scheduled in AWS Glue.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="to-start-up-a-notebook"></a>To start up a notebook<a class="hash-link" href="#to-start-up-a-notebook" title="Direct link to heading">#</a></h3><ol><li>Login to AWS using the <a href="https://hackney.awsapps.com/start/#/" target="_blank" rel="noopener noreferrer">Hackney SSO portal</a>.</li><li>Navigate to the <a href="https://eu-west-2.console.aws.amazon.com/sagemaker/home?region=eu-west-2#/notebook-instances" target="_blank" rel="noopener noreferrer">Notebook Instances</a> sections of the AWS Sagemaker console.</li><li>Find the notebook appended by your department name, for example <code>sagemaker-notebook-parking</code>.
If you can&#x27;t see a notebook for your department then please contact the Data Platform team to request one.</li><li>If the Status of the notebook is &quot;InService&quot;, go on the step 5.
If not, click &quot;Start&quot; under the Actions column. <img alt="start_notebook.png" src="/Data-Platform-Playbook/assets/images/start_notebook-2eec2f4d3f18e628402611b69b2bb6c4.png">
The notebook will then go to &quot;Pending&quot; status, if this is the first time the notebook has been used that day it will take around 10 minutes to start up.</li><li>Once the Status of the notebook has changed to &quot;InService&quot;, you have the option to either open <a href="https://jupyter-notebook.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">Jupyter</a> or <a href="https://jupyterlab.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">JupyterLab</a> using the links in the &quot;Actions&quot; column.
If you are unfamiliar with these it might be worth starting with JupyterLab but you can try both to see which you prefer.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="using-a-notebook"></a>Using a notebook<a class="hash-link" href="#using-a-notebook" title="Direct link to heading">#</a></h3><p>There is a <a href="https://github.com/LBHackney-IT/Data-Platform-Notebooks" target="_blank" rel="noopener noreferrer">github repository</a> which will be preloaded into the notebook.
This is where we store any notebooks script that we want to keep.
If you want to keep the changes you have made to any scripts you must commit the changes to this repository otherwise you may loose your work.</p><ul><li><p>You should work in the folder called &quot;Data-Platform-Notebooks&quot;, click into the folder if you aren&#x27;t already in there.</p><p><img alt="notebook_folders.png" src="/Data-Platform-Playbook/assets/images/notebook_folders-3ab7ee0731beef0b2a0bf0edd1597364.png"></p></li><li><p>Always start by pulling any latest changes from this repository. To do this, click on the Github icon on the left panel and then select the icon to pull latest changes, as shown below.</p><p><img alt="git_pull_in_jupyter_lab.png" src="/Data-Platform-Playbook/assets/images/git_pull_in_jupyter_lab-05d54ace3e0a5ac7557a4aa05d02f722.png"></p></li><li><p>There are a few templates in the templates folder that you can copy and paste into your departments folder and then use as a starting point.</p></li><li><p>Commit your changes by following the next section when you have finished working, so you don&#x27;t loose your work.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="saving-changes-to-the-notebook-scripts"></a>Saving changes to the notebook scripts<a class="hash-link" href="#saving-changes-to-the-notebook-scripts" title="Direct link to heading">#</a></h2><ol><li><p>To authenticate with your Github account you need to create a personal access token.
These are needed when two factor authentication is enabled, which the Hackney Github organisation enforces.
To create your personal access token you can follow <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token#creating-a-token" target="_blank" rel="noopener noreferrer">this Github guide</a>.
Once you have created it, you can store somewhere securely and keep re using for as long as the expiration period that you set up.</p></li><li><p>Before commiting, you need to ensure all the outputs from any scripts you&#x27;ve edited have been cleared. This is to prevent any data being stored in Github.
To do so you need to open each script you&#x27;ve been working on, then click on &quot;Edit&quot; then &quot;Clear all Outputs&quot;.</p></li><li><p>To add changes to the commit, navigate to the Github tab on the left panel.
There you will see a list of changed files &amp; untracked files.
The changed files are any that you have changed since the last commit and the untracked files are files which have been added since the last commit.
You can add any files you want to commit by hovering over the file and clicking on the plus sign.
When you do this the file will move to the Staged section, this lists all the changes that will be commiting. </p></li><li><p>When you have added all the files you want to commit to staged you can write a Summary &amp; Description then click &quot;Commit&quot;. You will then be promted for your name and email address, fill these in using your Hackney email.</p></li><li><p>The push your changes by clicking on the small cloud icon with an up arrow, as shown below.
You&#x27;ll be prompted to enter your github username and a password.<br>
In the password box you should paste in the personal access token created in the first step.</p><p>  <img alt="jupyter_push_icon.png" src="/Data-Platform-Playbook/assets/images/jupyter_push_icon-e2b49d986e240ae403d48933d57809eb.png"></p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="helpful-resources"></a>Helpful resources<a class="hash-link" href="#helpful-resources" title="Direct link to heading">#</a></h2><ul><li><a href="https://jupyterlab.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">JupyterLab documentation</a> </li><li><a href="https://jupyter-notebook.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">Jupyter documentation</a></li><li>The sparkmagic pyspark kernel that we use in the notebook has a few <a href="https://github.com/jupyter-incubator/sparkmagic/blob/master/examples/Pyspark%20Kernel.ipynb" target="_blank" rel="noopener noreferrer">helpful functions.</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Data-Platform-Playbook/tags/playbook">playbook</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/transforming-data/using-aws-glue/006-using-sagemaker.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/deploy-glue-jobs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Deploying Glue jobs to the Data Platform</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Data-Platform-Playbook/playbook/transforming-data/using-aws-glue/practical-examples/scheduling-liberator-glue-jobs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scheduling Liberator Glue Jobs Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prototyping-glue-jobs-in-a-jupyter-notebook" class="table-of-contents__link">Prototyping glue jobs in a Jupyter notebook</a><ul><li><a href="#to-start-up-a-notebook" class="table-of-contents__link">To start up a notebook</a></li><li><a href="#using-a-notebook" class="table-of-contents__link">Using a notebook</a></li></ul></li><li><a href="#saving-changes-to-the-notebook-scripts" class="table-of-contents__link">Saving changes to the notebook scripts</a></li><li><a href="#helpful-resources" class="table-of-contents__link">Helpful resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/Data-Platform-Playbook/assets/js/runtime~main.70ca00a1.js"></script>
<script src="/Data-Platform-Playbook/assets/js/main.ef2f8cd2.js"></script>
</body>
</html>