<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-training-modules/module-1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Ingesting data from Google Sheets | Hackney Data Platform Playbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://playbook.hackney.gov.uk/Data-Platform-Playbook/training-modules/module-1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ingesting data from Google Sheets | Hackney Data Platform Playbook"><meta data-rh="true" name="description" content="Training Module: Ingesting data from Google Sheets into the Data Platform raw zone"><meta data-rh="true" property="og:description" content="Training Module: Ingesting data from Google Sheets into the Data Platform raw zone"><link data-rh="true" rel="icon" href="/Data-Platform-Playbook/img/favicon.png"><link data-rh="true" rel="canonical" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/training-modules/module-1"><link data-rh="true" rel="alternate" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/training-modules/module-1" hreflang="en"><link data-rh="true" rel="alternate" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/training-modules/module-1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KNMFHOJ4X2-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Hackney Data Platform Playbook" href="/Data-Platform-Playbook/opensearch.xml"><link rel="stylesheet" href="/Data-Platform-Playbook/assets/css/styles.2e3b48f9.css">
<script src="/Data-Platform-Playbook/assets/js/runtime~main.22269ab3.js" defer="defer"></script>
<script src="/Data-Platform-Playbook/assets/js/main.7cffd43b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Data-Platform-Playbook/"><div class="navbar__logo"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Data Platform Playbook</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/data-platform-playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/playbook/getting-set-up">Playbook</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Data-Platform-Playbook/training-modules/module-0">Training Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/Data-Platform-Playbook/training-modules/module-0">Main Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/training-modules/module-0">Getting started with training</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Data-Platform-Playbook/training-modules/module-1">Ingesting data from Google Sheets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/training-modules/module-2">Transforming data to refined zone using Sagemaker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/training-modules/module-3">Deploying a job in AWS Glue</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/Data-Platform-Playbook/training-modules/Qlik/qlik-module-1">Qlik Modules</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/docs/CD-process">Technical Documentation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/dap-airflow/introduction">DAP‚á®flow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/architecture-decisions">Architecture Decision</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/spikes/amundsen-deployment">Spikes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/roles">Roles</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Data-Platform-Playbook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Training Modules</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Main Modules</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Ingesting data from Google Sheets</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Ingesting data from Google Sheets</h1></header>
<p>In this module you will ingest two datasets into the Data Platform from Google Sheets. This will involve creating an <a href="https://lbhackney-it.github.io/Data-Platform-Playbook/glossary/#glue" target="_blank" rel="noopener noreferrer">AWS Glue</a> job using <a href="https://lbhackney-it.github.io/Data-Platform-Playbook/glossary/#terraform" target="_blank" rel="noopener noreferrer">Terraform</a> as well as <a href="https://lbhackney-it.github.io/Data-Platform-Playbook/glossary/#github" target="_blank" rel="noopener noreferrer">GitHub</a> for making changes to the Data Platform code repository. Once your changes have been approved by the Data Platform team, you will then crawl the loaded data, to then be able to view and query it in <a href="https://lbhackney-it.github.io/Data-Platform-Playbook/glossary#athena" target="_blank" rel="noopener noreferrer">AWS Athena</a>, a database-like web client.</p>
<p>¬†</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-instructions">Step-by-step instructions<a href="#step-by-step-instructions" class="hash-link" aria-label="Direct link to Step-by-step instructions" title="Direct link to Step-by-step instructions">‚Äã</a></h2>
<p>Please ensure that <a href="/Data-Platform-Playbook/training-modules/module-0">Training Module: Getting started with training</a> is completed before starting this module.</p>
<p>¬†</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-preparing-the-google-sheet-for-this-exercise">1. Preparing the Google Sheet for this exercise<a href="#1-preparing-the-google-sheet-for-this-exercise" class="hash-link" aria-label="Direct link to 1. Preparing the Google Sheet for this exercise" title="Direct link to 1. Preparing the Google Sheet for this exercise">‚Äã</a></h3>
<p>Make a copy of this Covid vaccination <a href="https://docs.google.com/spreadsheets/d/1-ZNoQGu0LGlaKYDBWD8MUo8hqfcnE5YbgCXVz2MUxSw/edit#gid=2146898708" target="_blank" rel="noopener noreferrer">data</a> and name the Google Sheet as <code>covid_vaccination_data</code> in your own Google Drive. We are going to use the tabs <em>locations</em> and <em>vaccinations</em>.</p>
<p>¬†</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-granting-the-data-platform-access-to-your-new-google-sheet">2. Granting the Data Platform access to your new Google sheet<a href="#2-granting-the-data-platform-access-to-your-new-google-sheet" class="hash-link" aria-label="Direct link to 2. Granting the Data Platform access to your new Google sheet" title="Direct link to 2. Granting the Data Platform access to your new Google sheet">‚Äã</a></h3>
<p>We have created a <code>sandbox</code> department in the Data Platform, and an associated Google service account: <code>sandbox@dataplatform-stg.iam.gserviceaccount.com</code></p>
<ul>
<li>The Data Platform will use this account to connect to your Google sheet.</li>
<li>Use the sharing settings of your sheet and grant ‚ÄúViewer‚Äù permissions to this user.</li>
<li><a href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/playbook/ingesting-data/google-sheets-import#preparing-a-google-sheet-for-ingestion" target="_blank" rel="noopener noreferrer">Detailed steps</a> are in the Playbook.</li>
</ul>
<p>¬†</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-creating-two-ingestion-jobs-in-terraform">3. Creating two ingestion jobs in Terraform<a href="#3-creating-two-ingestion-jobs-in-terraform" class="hash-link" aria-label="Direct link to 3. Creating two ingestion jobs in Terraform" title="Direct link to 3. Creating two ingestion jobs in Terraform">‚Äã</a></h3>
<p>Your Google sheet is going to be ingested by a job running in <a href="https://lbhackney-it.github.io/Data-Platform-Playbook/glossary#glue" target="_blank" rel="noopener noreferrer">AWS Glue</a>. We often just refer to AWS Glue as &#x27;Glue&#x27;.</p>
<p>You will write a bit of <a href="https://lbhackney-it.github.io/Data-Platform-Playbook/glossary/#terraform" target="_blank" rel="noopener noreferrer">Terraform</a> that will deploy this job automatically in the AWS environment. You are going to write this code directly in your web browser in GitHub <a href="https://github.com/LBHackney-IT/Data-Platform/blob/main/terraform/etl/08-google-sheets-imports.tf" target="_blank" rel="noopener noreferrer">here</a>, adding to the existing terraform script <code>26-google-sheets-imports.tf</code>.</p>
<p><img decoding="async" loading="lazy" alt="Terraform script" src="/Data-Platform-Playbook/assets/images/edit_terraform_google_sheets-b8906227cd666f42dac5d3cd8113a832.png" width="2960" height="1580" class="img_ev3q"></p>
<p>You could also write the job locally within your interactive development environment, but editing via the GitHub web interface will be easier in this case as you won&#x27;t need to clone the repository.</p>
<p>You will need to create two modules within the Terraform script as we are ingesting two datasets from Google spreadsheet:</p>
<ul>
<li>locations</li>
<li>vaccinations</li>
</ul>
<p>i. Go to the Playbook to view <a href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/playbook/ingesting-data/google-sheets-import#setting-up-the-aws-glue-job" target="_blank" rel="noopener noreferrer">detailed steps</a> on how to create a Terraform module.</p>
<p>Additionally, please complete the following steps:</p>
<p>ii. Your department name will be <code>sandbox</code> for the purpose of the training e.g. <code>module.department_sandbox</code>.</p>
<p>iii. Suffix your new Terraform module name with the department <code>sandbox</code> and <code>your_name</code> so that each participant‚Äôs job will be easily identifiable. The module name will need to also reflect the individual dataset so make sure that the dataset name is also included within the module name e.g. <code>sandbox_joe_bloggs_covid_vaccinations</code>.</p>
<p>iv. Prefix the dataset_name with your name e.g <code>joe_bloggs_covid_vaccinations</code>.</p>
<p>v. No schedule is required as this is a one-off import, so this line does not need to be included within the module.</p>
<p>¬†</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-getting-your-jobs-deployed-to-the-data-platform">4. Getting your jobs deployed to the Data Platform<a href="#4-getting-your-jobs-deployed-to-the-data-platform" class="hash-link" aria-label="Direct link to 4. Getting your jobs deployed to the Data Platform" title="Direct link to 4. Getting your jobs deployed to the Data Platform">‚Äã</a></h3>
<p>The next step is to commit your changes to the <a href="https://github.com/LBHackney-IT/Data-Platform" target="_blank" rel="noopener noreferrer">Data Platform GitHub repository</a>. Follow the instructions <a href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/playbook/getting-set-up/using-github#committing-your-changes-to-the-data-platform-project" target="_blank" rel="noopener noreferrer">here</a> on how to do this.</p>
<p>Create a <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests" target="_blank" rel="noopener noreferrer">Pull Request</a> (PR) for the changes to the Terraform script that you have just made. <strong>Two approvals</strong> are required before your code can get merged into the <em>main</em> branch of the Data Platform repository. If you know the names of your reviewers, you can send them the URL of your PR to speed up the process.</p>
<p>Once you have received confirmation that two reviewers have approved your PR, go back to GitHub and merge your code. This will deploy your job out to Data Platform Pre-Production environment. This only happens once. From that point onwards, you will be able to see it in the AWS console, and it will run on schedule or manually, depending on how it was configured in Terraform.</p>
<blockquote>
<p>‚ö†Ô∏è<!-- --> There will be a 10-15 minute delay whilst the code deployment takes place. You can take a break or look at a ready-made job in the interim. To check the status of your deployment, navigate to the Actions tab in the GitHub web interface.</p>
</blockquote>
<p>In everyday use you may not need the data to be immediately available, in which case steps 5-6 would be picked up by the scheduled daily jobs, provided a schedule is specified in the Terraform module.</p>
<p>Log in to <a href="https://hackney.awsapps.com/start#/" target="_blank" rel="noopener noreferrer">AWS</a> as the <code>DataPlatformSandboxStg</code> role via the <code>Management Console</code> for that role.</p>
<p><img decoding="async" loading="lazy" alt="AWS console" src="/Data-Platform-Playbook/assets/images/sandox-console-1cc99cfdeda975efa4dbfc83c336b726.png" width="1768" height="118" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-finding-and-running-your-jobs-in-the-aws-console">5. Finding and running your jobs in the AWS console<a href="#5-finding-and-running-your-jobs-in-the-aws-console" class="hash-link" aria-label="Direct link to 5. Finding and running your jobs in the AWS console" title="Direct link to 5. Finding and running your jobs in the AWS console">‚Äã</a></h3>
<blockquote>
<p>üí°<!-- --> You can search for AWS tools like Glue, Crawlers etc. using the toolbar. If you cannot find a job or crawler check the region is London in the top right of the screen.</p>
</blockquote>
<p>Your jobs should now be available within <a href="https://eu-west-2.console.aws.amazon.com/gluestudio/home?region=eu-west-2#/jobs" target="_blank" rel="noopener noreferrer">Glue Studio</a>. They will be named like <code>stg Google Sheets Import Job - department-dataset-yourname</code>.</p>
<blockquote>
<p>‚ö†Ô∏è<!-- --> If you are waiting for code deployment to complete, then look for <code>stg Google Sheets Import Job - sandbox-daro-covid-locations</code> and <code>stg Google Sheets Import Job - sandbox-daro-covid-vaccinations</code> jobs instead.</p>
</blockquote>
<p>Once you have selected a Glue job, you can run it by clicking <code>Run job</code>
To monitor the progress of your Glue job run, click through to the Glue job and navigate to the <code>Runs</code> tab.</p>
<p>It is sometimes helpful to check the specific output <a href="https://s3.console.aws.amazon.com/s3/home?region=eu-west-2" target="_blank" rel="noopener noreferrer">S3</a> bucket for a job to see if it has run; the parquet files will be partitioned by date.
You can find the data by navigating to the location highlighted in the screenshot below but using your job name instead of <code>daro-covid-vaccinations</code>.
You should see data for today&#x27;s date under the job you have run.</p>
<p><img decoding="async" loading="lazy" alt="s3 bucket" src="/Data-Platform-Playbook/assets/images/s3_check_partitions-68fcb3ad9823c5ccf650b5a64be9d18f.png" width="3000" height="1552" class="img_ev3q"></p>
<p>¬†</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-crawling-the-ingested-data-to-make-it-available-in-the-glue-catalogue">6. Crawling the ingested data to make it available in the Glue catalogue.<a href="#6-crawling-the-ingested-data-to-make-it-available-in-the-glue-catalogue" class="hash-link" aria-label="Direct link to 6. Crawling the ingested data to make it available in the Glue catalogue." title="Direct link to 6. Crawling the ingested data to make it available in the Glue catalogue.">‚Äã</a></h3>
<p><code>Crawling</code> is the mechanism used to populate the Glue Data Catalog so that data is made visible in Athena by picking up the column names and data types.</p>
<ul>
<li>Once the Glue jobs have successfully run, go ahead and run the crawlers that were created as part of the import job.
You can use the AWS search bar to locate the <a href="https://eu-west-2.console.aws.amazon.com/glue/home?region=eu-west-2#catalog:tab=crawlers" target="_blank" rel="noopener noreferrer">Crawlers</a> page.
To search for your Crawler, click on the search box and then select the <code>Name</code> filter and enter the name of your Crawler, and click <code>Run crawler</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-viewing-and-querying-the-data-in-athena">7. Viewing and querying the data in Athena<a href="#7-viewing-and-querying-the-data-in-athena" class="hash-link" aria-label="Direct link to 7. Viewing and querying the data in Athena" title="Direct link to 7. Viewing and querying the data in Athena">‚Äã</a></h3>
<p>i. Check the data in <a href="https://eu-west-2.console.aws.amazon.com/athena/home?region=eu-west-2#/query-editor/" target="_blank" rel="noopener noreferrer">AWS Athena</a>, the interface to view and query data from the Glue Catalogue.</p>
<p>ii. Open the <code>Query editor</code>.</p>
<p>iii. Make sure workgroup is set to <code>sandbox</code> and you are using the <code>sandbox-raw-zone</code> database.
Run a simple query in Athena against your tables created or updated by the crawlers.
(<strong>Make a note of the names of your tables as you will need them for Module 2</strong>).
You can generate a SQL preview query by selecting the three vertical dots by the table name and select <code>Preview Table</code> to see the top 10 lines.
The dialect of SQL used in Athena is <a href="https://prestodb.io/docs/current/sql.html" target="_blank" rel="noopener noreferrer">Presto SQL</a>.</p>
<p>iv. You should now be able to repeat steps 5-7 for the job that <em>you</em> created as the code should now have been deployed into to main Data Platform repository.</p>
<p>¬†</p>
<blockquote>
<p>üôå<!-- --> Congratulations! You have completed Module 1!</p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Data-Platform-Playbook/tags/training">training</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/training-modules/module-1.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Data-Platform-Playbook/training-modules/module-0"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting started with training</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Data-Platform-Playbook/training-modules/module-2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transforming data to refined zone using Sagemaker</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-by-step-instructions" class="table-of-contents__link toc-highlight">Step-by-step instructions</a><ul><li><a href="#1-preparing-the-google-sheet-for-this-exercise" class="table-of-contents__link toc-highlight">1. Preparing the Google Sheet for this exercise</a></li><li><a href="#2-granting-the-data-platform-access-to-your-new-google-sheet" class="table-of-contents__link toc-highlight">2. Granting the Data Platform access to your new Google sheet</a></li><li><a href="#3-creating-two-ingestion-jobs-in-terraform" class="table-of-contents__link toc-highlight">3. Creating two ingestion jobs in Terraform</a></li><li><a href="#4-getting-your-jobs-deployed-to-the-data-platform" class="table-of-contents__link toc-highlight">4. Getting your jobs deployed to the Data Platform</a></li><li><a href="#5-finding-and-running-your-jobs-in-the-aws-console" class="table-of-contents__link toc-highlight">5. Finding and running your jobs in the AWS console</a></li><li><a href="#6-crawling-the-ingested-data-to-make-it-available-in-the-glue-catalogue" class="table-of-contents__link toc-highlight">6. Crawling the ingested data to make it available in the Glue catalogue.</a></li><li><a href="#7-viewing-and-querying-the-data-in-athena" class="table-of-contents__link toc-highlight">7. Viewing and querying the data in Athena</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Made by Hackney's Data Analytics Platform Team.</div></div></div></footer></div>
</body>
</html>