<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/redshift" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Redshift - Creating users, databases and exposing data from Glue | Hackney Data Platform Playbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://playbook.hackney.gov.uk/Data-Platform-Playbook/docs/redshift"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Redshift - Creating users, databases and exposing data from Glue | Hackney Data Platform Playbook"><link data-rh="true" rel="icon" href="/Data-Platform-Playbook/img/favicon.png"><link data-rh="true" rel="canonical" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/docs/redshift"><link data-rh="true" rel="alternate" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/docs/redshift" hreflang="en"><link data-rh="true" rel="alternate" href="https://playbook.hackney.gov.uk/Data-Platform-Playbook/docs/redshift" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KNMFHOJ4X2-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Hackney Data Platform Playbook" href="/Data-Platform-Playbook/opensearch.xml"><link rel="stylesheet" href="/Data-Platform-Playbook/assets/css/styles.2e3b48f9.css">
<script src="/Data-Platform-Playbook/assets/js/runtime~main.119113be.js" defer="defer"></script>
<script src="/Data-Platform-Playbook/assets/js/main.2fe36f58.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Data-Platform-Playbook/"><div class="navbar__logo"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Data Platform Playbook</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/data-platform-playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/playbook/getting-set-up">Playbook</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/training-modules/module-0">Training Modules</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Data-Platform-Playbook/docs/CD-process">Technical Documentation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/CD-process">CD Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/CI-process">CI Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/academy-ingestion">Ingesting Academy data onto the Data Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/alloy-ingestion">Alloy data ingestion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/auto-adjusting-aws-budget">Auto-adjusting AWS Budget Alerts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/backdated-liberator-ingestion">Backdated Liberator data ingestion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/exporting-snapshot-to-landing-zone">Exporting database snapshots to the Data Platform Landing Zone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/import-external-files-to-landing-zone">Importing external files to the Data Platform Landing Zone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/import-spreadsheet-from-g-drive">Import spreadsheets from G Drive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/liberator-ingestion">Liberator data ingestion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Data-Platform-Playbook/docs/redshift">Redshift - Creating users, databases and exposing data from Glue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/ringgo-ingestion">RingGo data ingestion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/tascomi-ingestion">Tascomi data ingestion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/vpc-peering-connection-dataplatform-and-production-apis-account">VPC Peering Connection between Data Platform and Production APIs AWS accounts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/dap-airflow/introduction">DAP⇨flow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/architecture-decisions">Architecture Decision</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Data-Platform-Playbook/spikes/amundsen-deployment">Spikes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/roles">Roles</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Data-Platform-Playbook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Technical Documentation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Redshift - Creating users, databases and exposing data from Glue</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Redshift - Creating users, databases and exposing data from Glue</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objective--who-is-this-for">Objective / Who is this for?<a href="#objective--who-is-this-for" class="hash-link" aria-label="Direct link to Objective / Who is this for?" title="Direct link to Objective / Who is this for?">​</a></h2>
<p>After this article, you should be able to</p>
<ul>
<li>Create a user in redshift</li>
<li>Create a schema for your tables</li>
<li>Grant permissions to a user to view the tables</li>
<li>Make the connection with an AWS Glue database to see the data in the tables</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>In order to complete this article, you will need</p>
<ul>
<li>Permissions to configure Redshift</li>
<li>Access to Amazon Redshift</li>
<li>Access to Amazon Glue Databases</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="collection-structure">Collection Structure<a href="#collection-structure" class="hash-link" aria-label="Direct link to Collection Structure" title="Direct link to Collection Structure">​</a></h2>
<p>Unlike most Database services. Redshift has a three tier collection setup:</p>
<ol>
<li>The top most tier is called a Database, a Database contains multiple Schemas</li>
<li>The second tier is called a Schema, a Schema contains multiple Tables</li>
<li>The final tier is called a Table, a Table contains multiple rows of data or references a location in S3</li>
</ol>
<p><code>Database -&gt; Schema -&gt; Table</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-redshift-query-editor">Open Redshift Query Editor<a href="#open-redshift-query-editor" class="hash-link" aria-label="Direct link to Open Redshift Query Editor" title="Direct link to Open Redshift Query Editor">​</a></h2>
<p>Use the search bar at the top of AWS to search for Redshift. Then on the left, go to &quot;Editor&quot; then &quot;Query Editor&quot;. You will enter the code here.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-the-database">Connect to the Database<a href="#connect-to-the-database" class="hash-link" aria-label="Direct link to Connect to the Database" title="Direct link to Connect to the Database">​</a></h2>
<p>You must have an open connection to see the tables.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-user">Create a User<a href="#create-a-user" class="hash-link" aria-label="Direct link to Create a User" title="Direct link to Create a User">​</a></h2>
<p>To create a new user in Redshift, run the following command as a query:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USER</span><span class="token plain"> {username} </span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> PASSWORD </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{password}&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USER</span><span class="token plain"> housing_repairs </span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> PASSWORD </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;th1s1sANEx&amp;mpl3&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you are creating new users to be used with roled based access control please use user&#x27;s Hackney email address as their username. When creating email based usernames the username in the SQL command must be wrapped in double quotes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generating-strong-password">Generating strong password<a href="#generating-strong-password" class="hash-link" aria-label="Direct link to Generating strong password" title="Direct link to Generating strong password">​</a></h3>
<p>New password can be generated using the <a href="https://1password.com/password-generator" target="_blank" rel="noopener noreferrer">1Password online password generator</a>. These are the recommended settings:</p>
<ol>
<li>Password type: Random Password</li>
<li>Length: 30</li>
<li>Tick both &#x27;Numbers&#x27; and &#x27;Symbols&#x27; checkboxes</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sharing-the-password-with-the-user">Sharing the password with the user<a href="#sharing-the-password-with-the-user" class="hash-link" aria-label="Direct link to Sharing the password with the user" title="Direct link to Sharing the password with the user">​</a></h3>
<p>Once the user has been created the initial password needs to be shared with them securely and they must also be asked to change it.</p>
<p>To share the created password with the user please follow these steps:</p>
<ol>
<li>Add the password to your private vault in 1Password</li>
<li>Click on the share icon on the toolbar</li>
<li>Set the &#x27;Link expires after&#x27; value to &#x27;7 days&#x27;</li>
<li>Set the &#x27;Available to&#x27; value to &#x27;Only some people&#x27;</li>
<li>Tick the &#x27;Can be viewed only 1 time per person&#x27; box</li>
<li>Type user&#x27;s Hackney email address to the &#x27;Email addresses for the people to share this with:&#x27; field</li>
<li>Click on &#x27;Get link to share&#x27;</li>
<li>Use the &#x27;Copy&#x27; option in the popup to get the shareable link and email it to the user&#x27;s Hackney email address</li>
</ol>
<p>Once the link has been shared user can follow these steps to receive the password:</p>
<ol>
<li>Open the link in the email from 1Password</li>
<li>Verify your email address by filling in the details on the page and click &#x27;Send code&#x27;</li>
<li>Wait for the code to arrive and paste it to the &#x27;Verification code&#x27; field</li>
<li>Copy the provided password from the page. Please note the password can be retrieved only once</li>
<li>Use the provided password to connect to Redshift from your BI tool and use the SQL command below to change it. Please see the <a href="#Generating-strong-password">&quot;Generating strong password&quot;</a> section for advice on how to generate strong password</li>
</ol>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USER</span><span class="token plain"> {username} password </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{new-password}&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="external-schema">External Schema<a href="#external-schema" class="hash-link" aria-label="Direct link to External Schema" title="Direct link to External Schema">​</a></h2>
<p>Redshift Spectrum is able to access data in S3 that has been cataloged via AWS Glue by creating an external
schema. An external schema acts like a database but instead of holding the data within the redshift cluster it uses an
attached IAM role to read the data from S3.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-an-external-schema-requirements">Adding an External Schema requirements<a href="#adding-an-external-schema-requirements" class="hash-link" aria-label="Direct link to Adding an External Schema requirements" title="Direct link to Adding an External Schema requirements">​</a></h3>
<p>To create an External Schema you will need the name of the AWS Glue Database to be added. An IAM role that can be used
to read the data from S3 (A role has been included in the Data Platform) and a schema name that the database will be
displayed as.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="finding-the-name-of-the-aws-glue-database-to-be-added">Finding the name of the AWS Glue Database to be added<a href="#finding-the-name-of-the-aws-glue-database-to-be-added" class="hash-link" aria-label="Direct link to Finding the name of the AWS Glue Database to be added" title="Direct link to Finding the name of the AWS Glue Database to be added">​</a></h2>
<p>Navigate to AWS Glue and retrieve the name of the database you want to expose in Redshift. The example below uses &#x27;housing-repairs-raw-zone&#x27;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="finding-the-iam-role-details">Finding the IAM Role details<a href="#finding-the-iam-role-details" class="hash-link" aria-label="Direct link to Finding the IAM Role details" title="Direct link to Finding the IAM Role details">​</a></h2>
<p>Use the appropriate IAM role that you will find in the IAM console in AWS.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-an-external-schema">Adding an External Schema<a href="#adding-an-external-schema" class="hash-link" aria-label="Direct link to Adding an External Schema" title="Direct link to Adding an External Schema">​</a></h3>
<p>Execute the following SQL against the Redshift Cluster:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE EXTERNAL SCHEMA {schema-name}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    FROM DATA CATALOG</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    DATABASE &#x27;{aws-glue-database}&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    IAM_ROLE &#x27;arn:aws:iam::{aws-account-id}:role/dataplatform-{environment}-redshift-role&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CREATE EXTERNAL DATABASE IF NOT EXISTS;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> EXTERNAL </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> housing_repairs_raw_zone</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATA</span><span class="token plain"> CATALOG</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;housing-repairs-raw-zone&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    IAM_ROLE </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;arn:aws:iam::000000000000:role/dataplatform-prod-redshift-role&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> EXTERNAL </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">IF</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">NOT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">EXISTS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="granting-a-user-access">Granting a User Access<a href="#granting-a-user-access" class="hash-link" aria-label="Direct link to Granting a User Access" title="Direct link to Granting a User Access">​</a></h3>
<p>For a user to be able to access an external schema, they must first be granted the temp permission on the containing
database. Execute the following SQL against the Redshift Cluster:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">temp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">database</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> {username}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">temp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> data_platform</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> housing_repairs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once a user has the temp permission of a specific database, they then need to be granted permissions on each External
Schema that they need access to. Run the following commands for each Schema:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USAGE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">schema</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> {username}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ALL</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">schema</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> {username}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USAGE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> housing_repairs_raw_zone</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> housing_repairs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ALL</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> housing_repairs_raw_zone</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> housing_repairs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="role-based-access-control-rbac">Role based access control (RBAC)<a href="#role-based-access-control-rbac" class="hash-link" aria-label="Direct link to Role based access control (RBAC)" title="Direct link to Role based access control (RBAC)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="roles-management">Roles management<a href="#roles-management" class="hash-link" aria-label="Direct link to Roles management" title="Direct link to Roles management">​</a></h3>
<p>Redshift roles are managed using Terraform configuration. Configuration can be used to create new roles, give roles access to external schemas and also to setup role grants to allow roles to inherit permissions from other roles.</p>
<p>Please see the <a href="https://github.com/LBHackney-IT/Data-Platform/blob/main/terraform/etl/42-redshift.tf" target="_blank" rel="noopener noreferrer">Terraform configuration</a> for details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="users-permission-to-roles">Users permission to roles<a href="#users-permission-to-roles" class="hash-link" aria-label="Direct link to Users permission to roles" title="Direct link to Users permission to roles">​</a></h3>
<p>Redshift users can be granted access to roles by running the following command:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> ROLE {role</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name} </span><span class="token keyword" style="font-style:italic">To</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">user</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> ROLE housing_ro </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please note if the username is an email address it must be wrapped in double quotes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storing-the-credentials-of-the-created-user-in-a-parameters-store">Storing the credentials of the created user in a parameters store<a href="#storing-the-credentials-of-the-created-user-in-a-parameters-store" class="hash-link" aria-label="Direct link to Storing the credentials of the created user in a parameters store" title="Direct link to Storing the credentials of the created user in a parameters store">​</a></h3>
<p>The password created for the user needs to be added to the record created by Terraform in the AWS Secret Manager.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-we-know-if-it-worked">How do we know if it worked?<a href="#how-do-we-know-if-it-worked" class="hash-link" aria-label="Direct link to How do we know if it worked?" title="Direct link to How do we know if it worked?">​</a></h3>
<p>You will know if it has worked because the data will be visible in the redshift and via the redshift connectors in tools such as Qlik or Google Data Studio using the credentials in AWS Secret Manager.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="related-documents">Related documents<a href="#related-documents" class="hash-link" aria-label="Direct link to Related documents" title="Direct link to Related documents">​</a></h3>
<ul>
<li><a href="/Data-Platform-Playbook/playbook/querying-and-analysing-data/connecting-to-redshift-from-data-studio">Connecting to the Redshift cluster from Google Data Studio</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Data-Platform-Playbook/tags/playbook">playbook</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/docs/redshift.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Data-Platform-Playbook/docs/liberator-ingestion"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Liberator data ingestion</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Data-Platform-Playbook/docs/ringgo-ingestion"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RingGo data ingestion</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective--who-is-this-for" class="table-of-contents__link toc-highlight">Objective / Who is this for?</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#collection-structure" class="table-of-contents__link toc-highlight">Collection Structure</a></li><li><a href="#open-redshift-query-editor" class="table-of-contents__link toc-highlight">Open Redshift Query Editor</a></li><li><a href="#connect-to-the-database" class="table-of-contents__link toc-highlight">Connect to the Database</a></li><li><a href="#create-a-user" class="table-of-contents__link toc-highlight">Create a User</a><ul><li><a href="#generating-strong-password" class="table-of-contents__link toc-highlight">Generating strong password</a></li><li><a href="#sharing-the-password-with-the-user" class="table-of-contents__link toc-highlight">Sharing the password with the user</a></li></ul></li><li><a href="#external-schema" class="table-of-contents__link toc-highlight">External Schema</a><ul><li><a href="#adding-an-external-schema-requirements" class="table-of-contents__link toc-highlight">Adding an External Schema requirements</a></li></ul></li><li><a href="#finding-the-name-of-the-aws-glue-database-to-be-added" class="table-of-contents__link toc-highlight">Finding the name of the AWS Glue Database to be added</a></li><li><a href="#finding-the-iam-role-details" class="table-of-contents__link toc-highlight">Finding the IAM Role details</a><ul><li><a href="#adding-an-external-schema" class="table-of-contents__link toc-highlight">Adding an External Schema</a></li><li><a href="#granting-a-user-access" class="table-of-contents__link toc-highlight">Granting a User Access</a></li></ul></li><li><a href="#role-based-access-control-rbac" class="table-of-contents__link toc-highlight">Role based access control (RBAC)</a><ul><li><a href="#roles-management" class="table-of-contents__link toc-highlight">Roles management</a></li><li><a href="#users-permission-to-roles" class="table-of-contents__link toc-highlight">Users permission to roles</a></li><li><a href="#storing-the-credentials-of-the-created-user-in-a-parameters-store" class="table-of-contents__link toc-highlight">Storing the credentials of the created user in a parameters store</a></li><li><a href="#how-do-we-know-if-it-worked" class="table-of-contents__link toc-highlight">How do we know if it worked?</a></li><li><a href="#related-documents" class="table-of-contents__link toc-highlight">Related documents</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Made by Hackney's Data Analytics Platform Team.</div></div></div></footer></div>
</body>
</html>