<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney Data Platform Playbook" href="/Data-Platform-Playbook/opensearch.xml"><title data-react-helmet="true">Redshift - Creating users, databases and exposing data from Glue | Hackney Data Platform Playbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://playbook.hackney.gov.uk//Data-Platform-Playbook/docs/redshift"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Redshift - Creating users, databases and exposing data from Glue | Hackney Data Platform Playbook"><link data-react-helmet="true" rel="shortcut icon" href="/Data-Platform-Playbook/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://playbook.hackney.gov.uk//Data-Platform-Playbook/docs/redshift"><link data-react-helmet="true" rel="alternate" href="https://playbook.hackney.gov.uk//Data-Platform-Playbook/docs/redshift" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://playbook.hackney.gov.uk//Data-Platform-Playbook/docs/redshift" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Data-Platform-Playbook/assets/css/styles.1180568a.css">
<link rel="preload" href="/Data-Platform-Playbook/assets/js/runtime~main.0763972d.js" as="script">
<link rel="preload" href="/Data-Platform-Playbook/assets/js/main.15137405.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Data-Platform-Playbook/"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Data-Platform-Playbook/img/logo-long.svg" alt="Data Platform Playbook" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Data Platform Playbook</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/data-platform-playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Playbook</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Technical Documentation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/auto-adjusting-aws-budget">Auto-adjusting AWS Budget Alerts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/exporting-snapshot-to-landing-zone">Exporting database snapshots to the Data Platform Landing Zone</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/import-external-files-to-landing-zone">Importing external files to the Data Platform Landing Zone</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/import-xlsx-from-g-drive">Import XLXS from G Drive</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Data-Platform-Playbook/docs/redshift">Redshift - Creating users, databases and exposing data from Glue</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/tascomi-ingestion">Tascomi data ingestion</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Data-Platform-Playbook/docs/vpc-peering-connection-dataplatform-and-production-apis-account">VPC Peering Connection between Data Platform and Production APIs AWS accounts</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture Decision</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Spikes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Data-Platform-Playbook/roles">Roles</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Redshift - Creating users, databases and exposing data from Glue</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="objective--who-is-this-for"></a>Objective / Who is this for?<a class="hash-link" href="#objective--who-is-this-for" title="Direct link to heading">#</a></h2><p>After this article, you should be able to</p><ul><li>Create a user in redshift</li><li>Create a schema for your tables</li><li>Grant permissions to a user to view the tables</li><li>Make the connection with an AWS Glue database to see the data in the tables</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>In order to complete this article, you will need</p><ul><li>Permissions to configure Redshift</li><li>Access to Amazon Redshift</li><li>Access to Amazon Glue Databases</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="collection-structure"></a>Collection Structure<a class="hash-link" href="#collection-structure" title="Direct link to heading">#</a></h2><p>Unlike most Database services. Redshift has a three tier collection setup:</p><ol><li>The top most tier is called a Database, a Database contains multiple Schemas</li><li>The second tier is called a Schema, a Schema contains multiple Tables</li><li>The final tier is called a Table, a Table contains multiple rows of data or references a location in S3</li></ol><p><code>Database -&gt; Schema -&gt; Table</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="open-redshift-query-editor"></a>Open Redshift Query Editor<a class="hash-link" href="#open-redshift-query-editor" title="Direct link to heading">#</a></h2><p>Use the search bar at the top of AWS to search for Redshift. Then on the left, go to &quot;Editor&quot; then &quot;Query Editor&quot;. You will enter the code here.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="connect-to-the-database"></a>Connect to the Database<a class="hash-link" href="#connect-to-the-database" title="Direct link to heading">#</a></h2><p>You must have an open connection to see the tables.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="create-a-user"></a>Create a User<a class="hash-link" href="#create-a-user" title="Direct link to heading">#</a></h2><p>To create a new user in Redshift, run the following command as a query:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USER</span><span class="token plain"> {username} </span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> PASSWORD </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{password}&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USER</span><span class="token plain"> housing_repairs </span><span class="token keyword" style="font-style:italic">WITH</span><span class="token plain"> PASSWORD </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;th1s1sANEx&amp;mpl3&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="external-schema"></a>External Schema<a class="hash-link" href="#external-schema" title="Direct link to heading">#</a></h2><p>Redshift Spectrum is able to access data in S3 that has been cataloged via AWS Glue by creating an external
schema. An external schema acts like a database but instead of holding the data within the redshift cluster it uses an
attached IAM role to read the data from S3.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="adding-an-external-schema-requirements"></a>Adding an External Schema requirements<a class="hash-link" href="#adding-an-external-schema-requirements" title="Direct link to heading">#</a></h3><p>To create an External Schema you will need the name of the AWS Glue Database to be added. An IAM role that can be used
to read the data from S3 (A role has been included in the Data Platform) and a schema name that the database will be
displayed as.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="finding-the-name-of-the-aws-glue-database-to-be-added"></a>Finding the name of the AWS Glue Database to be added<a class="hash-link" href="#finding-the-name-of-the-aws-glue-database-to-be-added" title="Direct link to heading">#</a></h2><p>Navigate to AWS Glue and retrieve the name of the database you want to expose in Redshift. The example below uses &#x27;housing-repairs-raw-zone&#x27;.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="finding-the-iam-role-details"></a>Finding the IAM Role details<a class="hash-link" href="#finding-the-iam-role-details" title="Direct link to heading">#</a></h2><p>Use the appropriate IAM role that you will find in the IAM console in AWS.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="adding-an-external-schema"></a>Adding an External Schema<a class="hash-link" href="#adding-an-external-schema" title="Direct link to heading">#</a></h3><p>Execute the following SQL against the Redshift Cluster:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE EXTERNAL SCHEMA {schema-name}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    FROM DATA CATALOG</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    DATABASE &#x27;{aws-glue-database}&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    IAM_ROLE &#x27;arn:aws:iam::{aws-account-id}:role/dataplatform-{environment}-redshift-role&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CREATE EXTERNAL DATABASE IF NOT EXISTS;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> EXTERNAL </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> housing_repairs_raw_zone</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATA</span><span class="token plain"> CATALOG</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;housing-repairs-raw-zone&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    IAM_ROLE </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;arn:aws:iam::000000000000:role/dataplatform-stg-redshift-role&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">CREATE</span><span class="token plain"> EXTERNAL </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">IF</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">NOT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">EXISTS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="granting-a-user-access"></a>Granting a User Access<a class="hash-link" href="#granting-a-user-access" title="Direct link to heading">#</a></h3><p>For a user to be able to access an external schema, they must first be granted the temp permission on the containing
database. Execute the following SQL against the Redshift Cluster:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">temp</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">database</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> {username}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">temp</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> data_platform</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> housing_repairs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Once a user has the temp permission of a specific database, they then need to be granted permissions on each External
Schema that they need access to. Run the following commands for each Schema:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USAGE</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">schema</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> {username}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ALL</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> {</span><span class="token keyword" style="font-style:italic">schema</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">name}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> {username}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">USAGE</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> housing_repairs_raw_zone</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> housing_repairs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">GRANT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ALL</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">SCHEMA</span><span class="token plain"> housing_repairs_raw_zone</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">TO</span><span class="token plain"> housing_repairs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="storing-the-credentials-of-the-created-user-in-a-parameters-store"></a>Storing the credentials of the created user in a parameters store<a class="hash-link" href="#storing-the-credentials-of-the-created-user-in-a-parameters-store" title="Direct link to heading">#</a></h3><p>The password created for the user needs to be added to the record created by Terraform in the AWS Secret Manager.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="how-do-we-know-if-it-worked"></a>How do we know if it worked?<a class="hash-link" href="#how-do-we-know-if-it-worked" title="Direct link to heading">#</a></h3><p>You will know if it has worked because the data will be visible in the redshift and via the redshift connectors in tools such as Qlik or Google Data Studio using the credentials in AWS Secret Manager.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="related-documents"></a>Related documents<a class="hash-link" href="#related-documents" title="Direct link to heading">#</a></h3><ul><li><a href="/Data-Platform-Playbook/playbook/querying-and-analysing-data/connecting-to-redshift-from-data-studio">Connecting to the Redshift cluster from Google Data Studio</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Data-Platform-Playbook/tags/playbook">playbook</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/docs/redshift.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Data-Platform-Playbook/docs/import-xlsx-from-g-drive"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Import XLXS from G Drive</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Data-Platform-Playbook/docs/tascomi-ingestion"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tascomi data ingestion Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective--who-is-this-for" class="table-of-contents__link">Objective / Who is this for?</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#collection-structure" class="table-of-contents__link">Collection Structure</a></li><li><a href="#open-redshift-query-editor" class="table-of-contents__link">Open Redshift Query Editor</a></li><li><a href="#connect-to-the-database" class="table-of-contents__link">Connect to the Database</a></li><li><a href="#create-a-user" class="table-of-contents__link">Create a User</a></li><li><a href="#external-schema" class="table-of-contents__link">External Schema</a><ul><li><a href="#adding-an-external-schema-requirements" class="table-of-contents__link">Adding an External Schema requirements</a></li></ul></li><li><a href="#finding-the-name-of-the-aws-glue-database-to-be-added" class="table-of-contents__link">Finding the name of the AWS Glue Database to be added</a></li><li><a href="#finding-the-iam-role-details" class="table-of-contents__link">Finding the IAM Role details</a><ul><li><a href="#adding-an-external-schema" class="table-of-contents__link">Adding an External Schema</a></li><li><a href="#granting-a-user-access" class="table-of-contents__link">Granting a User Access</a></li><li><a href="#storing-the-credentials-of-the-created-user-in-a-parameters-store" class="table-of-contents__link">Storing the credentials of the created user in a parameters store</a></li><li><a href="#how-do-we-know-if-it-worked" class="table-of-contents__link">How do we know if it worked?</a></li><li><a href="#related-documents" class="table-of-contents__link">Related documents</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/Data-Platform-Playbook/assets/js/runtime~main.0763972d.js"></script>
<script src="/Data-Platform-Playbook/assets/js/main.15137405.js"></script>
</body>
</html>