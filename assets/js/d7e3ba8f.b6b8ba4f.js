"use strict";(self.webpackChunkdata_platform_playbook=self.webpackChunkdata_platform_playbook||[]).push([[317],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return f}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),f=r,g=u["".concat(s,".").concat(f)]||u[f]||p[f]||a;return n?o.createElement(g,i(i({ref:t},d),{},{components:n})):o.createElement(g,i({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3108:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return p}});var o=n(3117),r=n(102),a=(n(7294),n(3905)),i=["components"],l={title:"RingGo data ingestion",description:"Description of the ingestion process for RingGo data",layout:"playbook_js",tags:["playbook"]},s=void 0,c={unversionedId:"docs/ringgo-ingestion",id:"docs/ringgo-ingestion",title:"RingGo data ingestion",description:"Description of the ingestion process for RingGo data",source:"@site/docs/docs/ringgo-ingestion.md",sourceDirName:"docs",slug:"/docs/ringgo-ingestion",permalink:"/Data-Platform-Playbook/docs/ringgo-ingestion",draft:!1,editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/docs/ringgo-ingestion.md",tags:[{label:"playbook",permalink:"/Data-Platform-Playbook/tags/playbook"}],version:"current",frontMatter:{title:"RingGo data ingestion",description:"Description of the ingestion process for RingGo data",layout:"playbook_js",tags:["playbook"]},sidebar:"docs",previous:{title:"Redshift - Creating users, databases and exposing data from Glue",permalink:"/Data-Platform-Playbook/docs/redshift"},next:{title:"Tascomi data ingestion",permalink:"/Data-Platform-Playbook/docs/tascomi-ingestion"}},d={},p=[{value:"1. CSV file is downloaded from the RingGo SFTP server",id:"1-csv-file-is-downloaded-from-the-ringgo-sftp-server",level:3},{value:"Running the Lambda manually",id:"running-the-lambda-manually",level:3},{value:"Failure alerts",id:"failure-alerts",level:3}],u={toc:p};function f(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This section describes how the RingGo dataset gets ingested into the data platform"),(0,a.kt)("h3",{id:"1-csv-file-is-downloaded-from-the-ringgo-sftp-server"},"1. CSV file is downloaded from the RingGo SFTP server"),(0,a.kt)("p",null,"The company who owns the dataset (RingGo) uploads a csv file containing previous day's data into their SFTP server. The file drop happens every afternoon."),(0,a.kt)("p",null,"Lambda function called ",(0,a.kt)("inlineCode",{parentName:"p"},"sftp-to-s3")," runs on a schedule in the evening and copies the csv file to ",(0,a.kt)("inlineCode",{parentName:"p"},"dataplatform-prod-landing-zone/ringgo/sftp/input/")," folder in the landing zone.  "),(0,a.kt)("p",null,"On successful download the lambda function starts the ",(0,a.kt)("inlineCode",{parentName:"p"},"parking-copy-ringgo-sftp-data-to-raw-job-trigger")," trigger which kicks off the ETL workflow."),(0,a.kt)("h3",{id:"running-the-lambda-manually"},"Running the Lambda manually"),(0,a.kt)("p",null,"In case of a failure in the ingestion process the Lambda can be run manually from the console. "),(0,a.kt)("p",null,"To run the Lambda manually the following test body can be used in the Lambda console:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "DateToImport": "YYYY-MM-DD"\n}\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"DateToImport")," value determines which file is fetched from the SFTP server. The files are named in ",(0,a.kt)("inlineCode",{parentName:"p"},"data_warehouse_-YYYY-MM-DD.csv")," format, so that can be used to identify the correct file."),(0,a.kt)("p",null,"Please note that files are uploaded to the server each afternoon and they contain data for previous day, so the files are lacking behind by a day."),(0,a.kt)("h3",{id:"failure-alerts"},"Failure alerts"),(0,a.kt)("p",null,"The Lambda function is configured to send failure alerts to central ",(0,a.kt)("inlineCode",{parentName:"p"},"data-platform-lambda-alerts")," Google space."))}f.isMDXComponent=!0}}]);