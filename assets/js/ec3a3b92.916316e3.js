"use strict";(self.webpackChunkdata_platform_playbook=self.webpackChunkdata_platform_playbook||[]).push([[3097],{7253:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=n(4848),i=n(8453);const r={id:"move-staging-to-pre-production",title:"Move Staging to Pre-Production - ADR 012",description:"",tags:["adr"],number:"12","date-issued":"2021-12-16",status:"Accepted"},a=void 0,s={id:"architecture-decisions/records/move-staging-to-pre-production",title:"Move Staging to Pre-Production - ADR 012",description:"",source:"@site/docs/architecture-decisions/records/012-move-staging-to-pre-production.md",sourceDirName:"architecture-decisions/records",slug:"/architecture-decisions/records/move-staging-to-pre-production",permalink:"/Data-Platform-Playbook/architecture-decisions/records/move-staging-to-pre-production",draft:!1,unlisted:!1,editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/architecture-decisions/records/012-move-staging-to-pre-production.md",tags:[{inline:!0,label:"adr",permalink:"/Data-Platform-Playbook/tags/adr"}],version:"current",sidebarPosition:12,frontMatter:{id:"move-staging-to-pre-production",title:"Move Staging to Pre-Production - ADR 012",description:"",tags:["adr"],number:"12","date-issued":"2021-12-16",status:"Accepted"},sidebar:"docs",previous:{title:"Using Event Streaming to Ingest Data - ADR 012",permalink:"/Data-Platform-Playbook/architecture-decisions/records/do-not-connect-to-production-databases"},next:{title:"Using Event Streaming to Ingest Data - ADR 013",permalink:"/Data-Platform-Playbook/architecture-decisions/records/using-event-streaming-to-ingest-data"}},c={},d=[{value:"Context",id:"context",level:2},{value:"Decision Drivers",id:"decision-drivers",level:2},{value:"Considered Options",id:"considered-options",level:2},{value:"Decision",id:"decision",level:2},{value:"Consequences",id:"consequences",level:2}];function l(e){const t={a:"a",h2:"h2",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"context",children:"Context"}),"\n",(0,o.jsx)(t.p,{children:"Towards the end of December 2021 a component of our infrastructure that provided connectivity between a production and\nstaging account was flagged as a potential security breach and raised as an incident."}),"\n",(0,o.jsxs)(t.p,{children:["As part of the process of reviewing the incident we discussed the topic of production data being held in a staging\naccount which we have previously decided was a requirement of the successful operation of the Data Platform see\n",(0,o.jsx)(t.a,{href:"/architecture-decisions/records/production-data-in-staging",children:"ADR 008"})]}),"\n",(0,o.jsx)(t.p,{children:"It was confirmed that wider Hackney policy was to not have Production data held within Staging. This is due to the fact\nthat all staging accounts are interconnected and therefore even though the Data Platform Staging account might be\ntreated with the same level of security as production, a breach might occur in another account resulting in the\nData Platform account loosing data."}),"\n",(0,o.jsx)(t.p,{children:"The issue was therefore that we still required Production data to effectively develop ETL processes, but we were\nrequired not to hold production data in Staging where we normally develop ETL processes."}),"\n",(0,o.jsx)(t.h2,{id:"decision-drivers",children:"Decision Drivers"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Data Security"}),"\n",(0,o.jsx)(t.li,{children:"Consistent Environment Setup"}),"\n",(0,o.jsx)(t.li,{children:"ETL development requiring Production Data"}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"considered-options",children:"Considered Options"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Remove the Production data from the Staging account","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"This would prevent analysis from being able to efficiently develop ETL processes as most are based around data transformation based on the data held within the dataset. By removing or mocking the data the ETL jobs wouldn't have the data variations that they would need to be tested against."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"decision",children:"Decision"}),"\n",(0,o.jsx)(t.p,{children:"We reached the conclusion in conjunction with the Security team and the Cloud Engineering team that the best approach\nwould be to move the entire Staging account into the Production environment connecting it to the Production Hub account\nand continuing to treat the account as a Production account in terms of security. In addition to moving the account we\nalso renamed the account to Pre-Production in order to reduce confusion with the other Staging accounts."}),"\n",(0,o.jsx)(t.h2,{id:"consequences",children:"Consequences"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Pre-Production will not be able to connect to any of the staging accounts which will potentially make infrastructure testing difficult."}),"\n",(0,o.jsx)(t.li,{children:"Pre-Production will need to continue to be treated as a production in terms of security to prevent a loss of data"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var o=n(6540);const i={},r=o.createContext(i);function a(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);