"use strict";(self.webpackChunkdata_platform_playbook=self.webpackChunkdata_platform_playbook||[]).push([[2835],{1900:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>r});var n=t(4848),o=t(8453);const i={title:"Managing DataHub Metadata via Config Files",description:"How to manage and ingest metadata to DataHub using YAML configuration files",layout:"playbook_js",tags:["playbook"]},d="Ingesting Metadata to DataHub",s={id:"playbook/ingesting-data/managing-datahub-metadata-via-config-files",title:"Managing DataHub Metadata via Config Files",description:"How to manage and ingest metadata to DataHub using YAML configuration files",source:"@site/docs/playbook/ingesting-data/015-managing-datahub-metadata-via-config-files.md",sourceDirName:"playbook/ingesting-data",slug:"/playbook/ingesting-data/managing-datahub-metadata-via-config-files",permalink:"/Data-Platform-Playbook/playbook/ingesting-data/managing-datahub-metadata-via-config-files",draft:!1,unlisted:!1,editUrl:"https://github.com/LBHackney-IT/data-platform-playbook/edit/master/docs/playbook/ingesting-data/015-managing-datahub-metadata-via-config-files.md",tags:[{inline:!0,label:"playbook",permalink:"/Data-Platform-Playbook/tags/playbook"}],version:"current",sidebarPosition:15,frontMatter:{title:"Managing DataHub Metadata via Config Files",description:"How to manage and ingest metadata to DataHub using YAML configuration files",layout:"playbook_js",tags:["playbook"]},sidebar:"docs",previous:{title:"CSV files to Glue Catalog automation",permalink:"/Data-Platform-Playbook/playbook/ingesting-data/CSV-files-to-Glue-Catalog-automation"},next:{title:"Export data catalog table or view to Google Sheets",permalink:"/Data-Platform-Playbook/playbook/exporting-data/save-glue-catalog-to-google-sheet"}},l={},r=[{value:"Overview",id:"overview",level:2},{value:"Configuration File Structure",id:"configuration-file-structure",level:2},{value:"How to Add Tables to Glue Ingestion",id:"how-to-add-tables-to-glue-ingestion",level:2},{value:"Add a Database",id:"add-a-database",level:3},{value:"Add a Table",id:"add-a-table",level:3},{value:"Remove a Table",id:"remove-a-table",level:3},{value:"How to Add Qlik Spaces to Ingestion",id:"how-to-add-qlik-spaces-to-ingestion",level:2},{value:"How to Add Ingestion from Other Sources",id:"how-to-add-ingestion-from-other-sources",level:2},{value:"How to Add a New Domain",id:"how-to-add-a-new-domain",level:2},{value:"How to Add a New Data Platform",id:"how-to-add-a-new-data-platform",level:2},{value:"How to Add a Data Product",id:"how-to-add-a-data-product",level:2},{value:"How to Add Dataset Metadata (Advanced)",id:"how-to-add-dataset-metadata-advanced",level:2}];function c(a){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"ingesting-metadata-to-datahub",children:"Ingesting Metadata to DataHub"})}),"\n",(0,n.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(e.p,{children:["DataHub metadata is managed through YAML configuration files in the ",(0,n.jsx)(e.code,{children:"dap-datahub"})," repository under ",(0,n.jsx)(e.code,{children:"yaml_config/"}),". After updating these files and merging to the main branch, they will be synced to a bespoke S3 bucket and the DataHub ingestion DAG will process them daily at 10:00 AM."]}),"\n",(0,n.jsx)(e.h2,{id:"configuration-file-structure",children:"Configuration File Structure"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:"yaml_config/\n\u251c\u2500\u2500 ingestion/                    # Source ingestion recipes\n\u2502   \u251c\u2500\u2500 glue.yaml                 # AWS Glue Catalog ingestion\n\u2502   \u2514\u2500\u2500 qlik_cloud.yaml           # Qlik Cloud ingestion\n\u251c\u2500\u2500 metadata/\n\u2502   \u251c\u2500\u2500 domains/                  # Domain definitions\n\u2502   \u2502   \u2514\u2500\u2500 domains.yaml\n\u2502   \u251c\u2500\u2500 dataplatforms/            # Platform definitions\n\u2502   \u2502   \u2514\u2500\u2500 dataplatforms.yaml\n\u2502   \u251c\u2500\u2500 datasets/                 # Individual dataset metadata\n\u2502   \u2502   \u2514\u2500\u2500 *.yaml\n\u2502   \u2514\u2500\u2500 dataproducts/             # Data product definitions (grouped by domain)\n\u2502       \u251c\u2500\u2500 child-fam-services/\n\u2502       \u2502   \u2514\u2500\u2500 *.yaml\n\u2502       \u2514\u2500\u2500 housing/\n\u2502           \u2514\u2500\u2500 *.yaml\n"})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-tables-to-glue-ingestion",children:"How to Add Tables to Glue Ingestion"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"File:"})," ",(0,n.jsx)(e.code,{children:"ingestion/glue.yaml"})]}),"\n",(0,n.jsx)(e.h3,{id:"add-a-database",children:"Add a Database"}),"\n",(0,n.jsxs)(e.p,{children:["Add to the ",(0,n.jsx)(e.code,{children:"database_pattern.allow"})," list:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:"database_pattern:\n    allow:\n        - your-database-name\n"})}),"\n",(0,n.jsx)(e.h3,{id:"add-a-table",children:"Add a Table"}),"\n",(0,n.jsxs)(e.p,{children:["Add to the ",(0,n.jsx)(e.code,{children:"table_pattern.allow"})," list:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:"table_pattern:\n    allow:\n        - database-name.table-name\n"})}),"\n",(0,n.jsx)(e.h3,{id:"remove-a-table",children:"Remove a Table"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["The SQL-based sources (e.g. Glue) allow the enable of ",(0,n.jsx)(e.code,{children:"remove_stale_metadata"})," parameter. Simply remove the table from the ",(0,n.jsx)(e.code,{children:"table_pattern.allow"})," list. It will be automatically soft-deleted from DataHub on the next ingestion run."]}),"\n",(0,n.jsx)(e.li,{children:"Qlik Cloud ingestion does not support automatic deletion of stale metadata, so you will need to manually delete the dataset via DataHub UI or CLI if you want to remove it from the metadata store."}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-qlik-spaces-to-ingestion",children:"How to Add Qlik Spaces to Ingestion"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"File:"})," ",(0,n.jsx)(e.code,{children:"ingestion/qlik_cloud.yaml"})]}),"\n",(0,n.jsxs)(e.p,{children:["Add space names to the ",(0,n.jsx)(e.code,{children:"space_pattern.allow"})," list:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:"space_pattern:\n    allow:\n        - 'Your Space Name'\n"})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-ingestion-from-other-sources",children:"How to Add Ingestion from Other Sources"}),"\n",(0,n.jsxs)(e.p,{children:["If you need to add ingestion from sources other than Glue or Qlik Cloud, please ",(0,n.jsx)(e.strong,{children:"contact the DAP team"})," to create the YAML template for you for the first time."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-a-new-domain",children:"How to Add a New Domain"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"File:"})," ",(0,n.jsx)(e.code,{children:"metadata/domains/domains.yaml"})]}),"\n",(0,n.jsx)(e.p,{children:"Add a new entry to the list:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:"- id: your-domain-id\n  display_name: Your Domain Display Name\n  description: Description of what this domain covers\n"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Fields:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"id"}),": Unique identifier (kebab-case)"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"display_name"}),": Name shown in DataHub UI"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"description"}),": What the domain covers"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-a-new-data-platform",children:"How to Add a New Data Platform"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"File:"})," ",(0,n.jsx)(e.code,{children:"metadata/dataplatforms/dataplatforms.yaml"})]}),"\n",(0,n.jsxs)(e.p,{children:["Add a new platform to the ",(0,n.jsx)(e.code,{children:"platforms"})," list:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:"platforms:\n  - id: glue\n    display_name: Data Analytics Platform\n    description: Platform description\n    logo: https://url-to-logo.png\n"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Fields:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"id"}),": Must match the source type used in the ingestion configuration (e.g., ",(0,n.jsx)(e.code,{children:"glue"}),", ",(0,n.jsx)(e.code,{children:"qlik-sense"}),", ",(0,n.jsx)(e.code,{children:"athena"}),") or a custom platform ID if you are adding metadata for a non-ingested source"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"display_name"}),": Custom name shown in DataHub UI"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"logo"}),": URL to logo image (optional)"]}),"\n"]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Note:"})," after adding a new platform, without attaching a dataset to it, the platform will not show up in the DataHub UI."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-a-data-product",children:"How to Add a Data Product"}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Navigate to the correct domain folder:"})," ",(0,n.jsx)(e.code,{children:"metadata/dataproducts/{domain-name}/"})]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Create a new YAML file:"})," e.g., ",(0,n.jsx)(e.code,{children:"my-product.yaml"})]}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:"Add the data product definition:"})}),"\n"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:'id: urn:li:dataProduct:domain-name.product-name\nproperties:\n  name: Product Display Name\n  description: "Business description of what this data product provides"\n  domain: urn:li:domain:domain-name\n  assets:\n    - urn:li:dataset:(urn:li:dataPlatform:glue,database.table1,${ENV})\n    - urn:li:dataset:(urn:li:dataPlatform:glue,database.table2,${ENV})\n  customProperties:\n    data_quality: "High"\n    refresh_frequency: "Daily"\n'})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Fields:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"id"}),": URN format: ",(0,n.jsx)(e.code,{children:"urn:li:dataProduct:domain.product-name"})]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"domain"}),": Must match an existing domain"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"assets"}),": List of dataset URNs to include"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"customProperties"}),": Optional metadata (key-value pairs)"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.h2,{id:"how-to-add-dataset-metadata-advanced",children:"How to Add Dataset Metadata (Advanced)"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Note:"}),"  In most cases, you do NOT need to add dataset metadata manually as datasets are automatically created during ingestion from sources as the single source of truth. Only use this if you need to override or add additional metadata to existing datasets. Please consult with the DAP team before adding custom dataset metadata."]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"File:"})," Create a new YAML file in ",(0,n.jsx)(e.code,{children:"metadata/datasets/"})," (e.g., ",(0,n.jsx)(e.code,{children:"my_dataset.yaml"})," as below)"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-yaml",children:"id: database.table_name\nplatform: glue\nenv: '${ENV}'\neditableProperties:\n  description: \"Your dataset description\"\nglobalTags:\n  tags:\n    - tag: urn:li:tag:YourTag\nownership:\n  owners:\n    - owner: urn:li:corpuser:your.email@hackney.gov.uk\n      type: TECHNICAL_OWNER\n"})})]})}function h(a={}){const{wrapper:e}={...(0,o.R)(),...a.components};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(c,{...a})}):c(a)}},8453:(a,e,t)=>{t.d(e,{R:()=>d,x:()=>s});var n=t(6540);const o={},i=n.createContext(o);function d(a){const e=n.useContext(i);return n.useMemo((function(){return"function"==typeof a?a(e):{...e,...a}}),[e,a])}function s(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(o):a.components||o:d(a.components),n.createElement(i.Provider,{value:e},a.children)}}}]);